# 03. í•™ìŠµ ë° ë¬¸ì œ í•´ê²° ë¡œê·¸

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë§ˆì£¼ì¹œ ì£¼ìš” ê¸°ìˆ ì  ë¬¸ì œì™€ ì´ë¥¼ í•´ê²°í•œ ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤. ì‹¤ì œ ì œê°€ ê³ ë¯¼í•œ ë¬¸ì œë“¤ì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ê¸°ìˆ í•˜ê² ìŠµë‹ˆë‹¤.

## 1. [Architecture] TDD

2025-10-31

### ë¬¸ì œ

> [!WARNING]
> TDDì˜ ìì„¸í•œ êµ¬í˜„ ë°©ì‹ì„ ëª¨ë¥¸ë‹¤!

ì´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ìœ„í•´ ëª©í‘œë¡œ ì‚¼ì€ ê²ƒì€ ì‘ì§€ë§Œ í˜„ëŒ€ì ì¸ ìš”ì†Œê°€ ëª¨ë‘ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ë¹ ë¥´ê³  í™•ì¥ì„± ìˆëŠ” íŒŒì´í”„ë¼ì¸ ë§Œë“¤ê¸°ì˜€ìŠµë‹ˆë‹¤.

ì´ ì •ì˜ì— ê°€ì¥ ì•Œë§ëŠ” ê°œë°œ ë°©ë²•ë¡ ì€ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•œ ë’¤ í…ŒìŠ¤íŠ¸ í†µê³¼ì— í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ê°œë°œí•˜ëŠ” ë‹¨ìˆœí•˜ë©° ë¬¸ì œ í•´ê²° ì¤‘ì‹¬ì˜ **TDD**ë¼ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

ë¬¸ì œê°€ ìˆì—ˆë‹¤ë©´ ì œê°€ TDDì— ëŒ€í•´ ì´ë¡ ì ìœ¼ë¡œ, í˜¹ì€ êµ¬í˜„ì˜ ê·¹íˆ ì¼ë¶€ë§Œ ì•Œê³  ìˆì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì…ë‹ˆë‹¤.

### í•´ê²°

`Gemini`ì™€ `Github Copilot`ì˜ ë„ì›€ì„ ë°›ì•„ [`CONTRIBUTING.md`](../CONTRIBUTING.md) ë¬¸ì„œë¥¼ í†µí•´ ê°€ì´ë“œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤ (~~ê¸°ìŠ¹ì „AI~~). ê¸°ì´ˆì ì¸ ìˆœì„œë¥¼ ì œê°€ ê°œë°œí•˜ëŠ” ì½”ë“œì— ì ìš©í•œë‹¤ê³  ê°€ì •í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. **ğŸ”´ RED: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±**

   - `tests/` ë””ë ‰í„°ë¦¬ì— ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ(`test_*.py`)ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
   - `mocker`ë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ ì˜ì¡´ì„±(API, S3)ì„ ì² ì €íˆ ëª¨í‚¹(Mocking)í•©ë‹ˆë‹¤.
   - `pytest`ë¥¼ ì‹¤í–‰í•˜ì—¬ **í…ŒìŠ¤íŠ¸ê°€ ì˜ˆìƒëŒ€ë¡œ ì‹¤íŒ¨í•˜ëŠ” ê²ƒì„ í™•ì¸**í•©ë‹ˆë‹¤.

2. **ğŸŸ¢ GREEN: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±**

   - `src/` ë””ë ‰í„°ë¦¬ì— `RED` ë‹¨ê³„ì˜ í…ŒìŠ¤íŠ¸ë¥¼ **ê²¨ìš° í†µê³¼í•  ë§Œí¼ì˜ ìµœì†Œí•œì˜ ì½”ë“œ**ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
   - `pytest`ë¥¼ ì‹¤í–‰í•˜ì—¬ **ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ” ê²ƒì„ í™•ì¸**í•©ë‹ˆë‹¤.

3. **ğŸŸ¡ REFACTOR: ì½”ë“œ ê°œì„ **
   - í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ëŠ” "ì•ˆì „ë§" ìœ„ì—ì„œ ì½”ë“œì˜ êµ¬ì¡°ë¥¼ ê°œì„ í•˜ê³ , ì¤‘ë³µì„ ì œê±°í•˜ë©°, ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.
   - ë¦¬íŒ©í† ë§ í›„ì—ë„ `pytest`ë¥¼ ì‹¤í–‰í•˜ì—¬ **ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ê³„ì† í†µê³¼í•˜ëŠ”ì§€ í™•ì¸**í•©ë‹ˆë‹¤.

**RED** -> **GREEN** -> **REFACTOR** ê° ë‹¨ê³„ì—ì„œ ì»¤ë°‹ì„ ë°˜ë³µí•˜ê³ , ê¸°ëŠ¥ ê°œë°œì´ ì™„ë£Œë˜ë©´ ì´ ë¸Œëœì¹˜ë¥¼ pushí•˜ê²Œ ë©ë‹ˆë‹¤. main ë¸Œëœì¹˜ì— mergeí•˜ëŠ” ê³¼ì •ì—ì„œ ì¶”ê°€ë¡œ Github Actionsì˜ CI íŒŒì´í”„ë¼ì¸ì´ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ëŠ”ë°ìš”. ì´ëŠ” ë’¤ì˜ CI íŒŒì´í”„ë¼ì¸ ì‘ì„± ë¬¸ì œì—ì„œ ìì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

TDDì—ì„œ Git Branch ì „ëµì€ ë³´í†µ 'Squash and Merge'ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì‰½ê²Œ ë§í•´ ë¸Œëœì¹˜ë¥¼ ë‹¨ìˆœíˆ í•©ì¹˜ëŠ”ê²Œ ì•„ë‹Œ ê¸°ëŠ¥ ê°œë°œ ê³¼ì •ì—ì„œ ì§„í–‰í•œ ì»¤ë°‹ì˜ ì´ë ¥ë“¤ì„ main ë¸Œëœì¹˜ì— í•˜ë‚˜ì˜ ìƒˆë¡œìš´ ì»¤ë°‹ í˜•íƒœë¡œ í•©ì¹˜ëŠ” í˜•íƒœì…ë‹ˆë‹¤. ìì˜í•œ TDD íˆìŠ¤í† ë¦¬ë¥¼ ê¸°ëŠ¥ ë‹¨ìœ„ì¸ í•˜ë‚˜ì˜ ì»¤ë°‹ìœ¼ë¡œ ë³‘í•©ë˜ëŠ” ê²ƒì´ì£ .

ë˜ í•˜ë‚˜ ì¤‘ìš”í•œê±´ TDDëŠ” **ì™¸ë¶€ í™˜ê²½ê³¼ ë¶„ë¦¬ëœ ìˆœìˆ˜í•œ ë¡œì§ í…ŒìŠ¤íŠ¸ë¥¼ ì§€í–¥**í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ì˜ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì€ ì„œë“œíŒŒí‹° API(IGDB)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³ , ì´ APIëŠ” ì™„ì „í•œ ì˜¤í”ˆì†ŒìŠ¤ì—ë‹¤ Amazonì—ì„œ ìš´ì˜í•˜ê³  ìˆëŠ” ë§Œí¼ ì•ˆì •ì„±ì€ ë†’ì§€ë§Œ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œëŠ” ëª¨í‚¹ëœ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì‹¤ì œ IGDB API ì‘ë‹µì„ ê¸°ë¡í•´ ëª¨í‚¹ ì‘ë‹µì„ ì €ì¥í•˜ê³  ì´ë¥¼ í…ŒìŠ¤íŠ¸ì— ì“°ëŠ” ë°©ì•ˆì„ ê³ ë ¤ ì¤‘ì…ë‹ˆë‹¤.

### ê²°ê³¼

ì´ ê³¼ì •ì„ í†µí•´ ì‹¤ì œë¡œ ì–´ë–¤ ê³¼ì •ì„ í†µí•´ TDDê°€ ì§„í–‰ë˜ëŠ”ì§€ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ê°œë°œ í”Œë¡œìš°ëŠ” í”„ë¡œì íŠ¸ ì¢…ë£Œê¹Œì§€ ê³„ì†í•´ì„œ ë°˜ë³µí•˜ê²Œ ë˜ëŠ” ë§Œí¼, ì„  í…ŒìŠ¤íŠ¸ í›„ êµ¬í˜„ ê³¼ì •ì´ ìµìˆ™í•˜ì§€ëŠ” ì•Šì§€ë§Œ ìµìˆ™í•´ì ¸ì•¼ í•  í•„ìš”ê°€ ìˆë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤.

í˜„ì¬ëŠ” ETLì˜ `extractors` ê°œë°œ ì¤‘, ì—ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•œ 5ê°œì˜ ê¸°ë³¸ì ì¸ í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ì½”ë“œë¥¼ êµ¬í˜„í•˜ê³ , ì´ë¥¼ ë¦¬íŒ©í† ë§í•˜ëŠ” ê³¼ì •ì— ìˆìŠµë‹ˆë‹¤.

## 2. [CI/CD] Github Actions CI íŒŒì´í”„ë¼ì¸

2025-11-01

### ë¬¸ì œ

> [!WARNING]
> CI íŒŒì´í”„ë¼ì¸ ì‘ì„±ì˜ íš¨ìœ¨ì ì´ê³  í•„ìˆ˜ì ì¸ ë°©ë²•ì„ ëª¨ë¥¸ë‹¤!

ì²˜ìŒ ì‘ì„±í•œ CI ì›Œí¬í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•­ëª©ì„ í¬í•¨í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

- Python ë‹¨ì¼ ë²„ì „
- pytestë§Œ ì‹¤í–‰

í•˜ì§€ë§Œ ì´ ì›Œí¬í”Œë¡œìš°ëŠ” `pyproject.toml`ì—ì„œ ê¸°ìˆ í•œ `>=3.11`ì„ ì¤€ìˆ˜í•˜ì§€ ì•Šì•˜ê³ , í¬ë§·íŒ…, ë¦°íŒ… ì—ëŸ¬ ë“±ì„ í¬í•¨í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

### í•´ê²°

ì´ë²ˆì—ë„ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•´ AIì™€ ê°œì„ ì•ˆì„ ë…¼ì˜í•˜ë©° ë‹¤ìŒê³¼ ê°™ì€ í•­ëª©ì„ í¬í•¨í•˜ëŠ” êµ¬ì¡°ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

- Python ë²„ì „ ë§¤íŠ¸ë¦­ìŠ¤ë¡œ 3ê°œ ë²„ì „ ë™ì‹œ í…ŒìŠ¤íŠ¸ (3.11, 3.12, 3.13)
- `uv` ìºì‹±ìœ¼ë¡œ CI ì†ë„ í–¥ìƒ
- `--extra dev`ë¡œ ê°œë°œ ì˜ì¡´ì„± ëª…ì‹œì  ì„¤ì¹˜
- í™˜ê²½ ë³€ìˆ˜ ì£¼ì…
- Codecov ì—…ë¡œë“œë¡œ ì»¤ë²„ë¦¬ì§€ ì¶”ì 
- í¬ë§·íŒ…/ë¦°íŒ…ê³¼ í…ŒìŠ¤íŠ¸ ë¶„ë¦¬í•´ ë³‘ë ¬ ì‹¤í–‰

ì´ë¥¼ í¬í•¨í•œ ì›Œí¬í”Œë¡œìš°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```yaml
name: CI with uv

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Set up uv
        uses: astral-sh/setup-uv@v1
        with:
          enable-cache: true

      - name: Install dependencies with uv
        run: |
          uv venv
          uv sync --extra dev

      - name: Run Ruff linter
        run: |
          uv run ruff check src tests

      - name: Check code formatting
        run: |
          uv run ruff format --check src tests

      - name: Run type checker with uv
        run: |
          uv run mypy src

  test:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        python-version: ["3.11", "3.12", "3.13"]

    steps:
      # ì½”ë“œ ì²´í¬ì•„ì›ƒ
      - uses: actions/checkout@v4

      # Python ì„¤ì •
      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ matrix.python-version }}

      # ì˜ì¡´ì„± ì„¤ì¹˜ - uv
      - name: Set up uv
        uses: astral-sh/setup-uv@v1
        with:
          enable-cache: true

      # ì˜ì¡´ì„± ì„¤ì¹˜ - í”„ë¡œì íŠ¸
      - name: Install dependencies with uv
        run: |
          uv venv
          uv sync --extra dev

      # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
      - name: Run tests with uv
        env:
          IGDB_CLIENT_ID: "test-client-id"
          IGDB_CLIENT_SECRET: "test-client-secret"
          IGDB_RATE_LIMIT: 4
          LOG_LEVEL: "INFO"
        run: |
          uv run pytest --cov=src --cov-report=xml

      # ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ì—…ë¡œë“œ
      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v4
        if: matrix.python-version == '3.11'
        with:
          files: ./coverage.xml
          flags: unittests
          name: codecov-py${{ matrix.python-version }}
          fail_ci_if_error: false
```

### ê²°ê³¼

ì´ë²ˆ ì‘ì—…ì„ ë°°ìš´ ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

1. ë³‘ë ¬ ì‹¤í–‰

Github Actionsì—ì„œ ë³‘ë ¬ ì‹¤í–‰ì´ ê°€ëŠ¥í•œê±° ì•Œê³  ê³„ì…¨ë‚˜ìš”?

2. ìºì‹±

ìºì‹±ìœ¼ë¡œ CI ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ë„ ì²˜ìŒ ì•Œì•˜ìŠµë‹ˆë‹¤. Github Actionsê°€ ê°€ìƒ ë¨¸ì‹ ì„ ì“¸ ê²ƒì´ë¼ëŠ” ì¶”ì¸¡ì„ ì–´ë ´í’‹ì´ í–ˆì§€ë§Œ ì´ëŸ° ê¸°ëŠ¥ë„ ê°€ëŠ¥í•˜ë‹¤ë‹ˆ...

3. ë§¤íŠ¸ë¦­ìŠ¤ ì „ëµ

Python ë²„ì „ ë³‘ë ¬ í…ŒìŠ¤íŠ¸ë¡œ í˜¸í™˜ì„±ë„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4. CodeCov

ê°„ë‹¨í•œ ì„¤ì •ìœ¼ë¡œ í˜„ ì½”ë“œì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë³´ê³ ì„œë¥¼ ì—…ë¡œë“œí•˜ê³  ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ë‹¤ëª»í•´ Github Actions ì›Œí¬í”Œë¡œìš° íŒŒì¼ë„ ìµœì í™”í•˜ëŠ”ë° ê³ ë ¤í•´ì•¼ í•  ì ì´ ì´ë ‡ê²Œ ë§ë„¤ìš”. íŠ¹íˆ ê°€ìƒ í™˜ê²½ìœ¼ë¡œ `uv`ë¥¼ ì²˜ìŒ ì“°ë©´ì„œ ìƒˆë¡œ ì•Œê²Œ ëœ ì‚¬ì‹¤ì´ ë§ì•˜ìŠµë‹ˆë‹¤.
